<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Customer Query</title>
    </h:head>
    <h:body>
		<h1>Customer Query</h1>
		<h:form id="queryForm">

			<h:panelGrid columns="2">
				Customer id:
				<h:inputText value="#{customerView.queryId}" id="queryId"/>

				<h:commandButton value="Clear" action="#{customerView.clearQuery()}">
					<f:ajax execute="@form" render="@form"/>
				</h:commandButton>
				<h:commandButton value="Search" action="#{customerView.query()}">
					<f:ajax execute="@form" render="@form"/>
				</h:commandButton>

				<h:panelGroup/>
				<h:message for="queryId"/>
			</h:panelGrid>

			<h:panelGroup rendered="#{customerView.customer ne null}">
				<h:panelGrid columns="2">
					Name: <h:outputText value="#{customerView.customer.name}"/>
					Address: <h:outputText value="#{customerView.customer.addressline1}"/>
					<h:panelGroup/> <h:outputText value="#{customerView.customer.addressline2}"/>
					City: <h:outputText value="#{customerView.customer.city}"/>
					State: <h:outputText value="#{customerView.customer.state}"/>
					ZIP: <h:outputText value="#{customerView.customer.zip}"/>
					Phone: <h:outputText value="#{customerView.customer.phone}"/>
					Fax: <h:outputText value="#{customerView.customer.fax}"/>
					Email: <h:outputText value="#{customerView.customer.email}"/>
					Discount code: <h:outputText value="#{customerView.customer.discountCode}"/>
					Credit limit: <h:outputText value="#{customerView.customer.creditLimt}"/>
				</h:panelGrid>

				<h:dataTable var="po" border="1"
							 value="#{customerView.customer.purchaseOrders}" 
							 rendered="#{not empty customerView.customer.purchaseOrders}">
					<h:column>
						<f:facet name="header">Order Id</f:facet>
						<h:outputText value="#{po.orderNum}"/>
					</h:column>

					<h:column>
						<f:facet name="header">Product Id</f:facet>
						<h:outputText value="#{po.productId}"/>
					</h:column>

					<h:column>
						<f:facet name="header">Quantity</f:facet>
						<h:outputText value="#{po.quantity}"/>
					</h:column>

					<h:column>
						<f:facet name="header">Sales Date</f:facet>
						<h:outputText value="#{po.salesDate}"/>
					</h:column>

					<h:column>
						<f:facet name="header">Shipping Date</f:facet>
						<h:outputText value="#{po.shippingDate}"/>
					</h:column>

					<h:column>
						<f:facet name="header">Shipping Cost</f:facet>
						<h:outputText value="$#{po.shippingCost}"/>
					</h:column>

					<h:column>
						<f:facet name="header">Freight</f:facet>
						<h:outputText value="#{po.freightCompany}"/>
					</h:column>
				</h:dataTable>
			</h:panelGroup>

		</h:form>
    </h:body>
</html>

